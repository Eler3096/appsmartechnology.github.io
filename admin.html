<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Panel Administrador</title>
  <link rel="stylesheet" href="admin.css">
  <style>
    #modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Fondo semi-transparente */
        display: flex;
        justify-content: center;
        align-items: center;
    }
    #modalContent {
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
    }
    #modal img {
        cursor: pointer;
        margin: 10px;
        height: 100px;
        border-radius: 5px;
    }
  </style>
</head>

<body>

<div class="admin-container">

  <header class="admin-header">
    <div class="admin-header-left">
      <h1><span class="icon">‚öôÔ∏è</span> AppsMart Admin</h1>
      <p>Subir, editar y manejar aplicaciones</p>
    </div>
    <button class="btn-logout" onclick="logout()">Cerrar sesi√≥n</button>
  </header>

  <!-- ============ BOT√ìN PARA MOSTRAR / OCULTAR ============ -->
  <button id="toggleBtn" class="btn-toggle" onclick="toggleApps()">üì¶ Apps Subidas</button>

  <!-- ============ LISTADO OCULTO AL INICIO ============ -->
  <div id="appsContainer" class="hidden">
    <h3 class="panel-section-title">üì¶ Aplicaciones Publicadas</h3>

    <table class="apps-table">
      <thead>
        <tr>
          <th>Icono</th>
          <th>Nombre</th>
          <th>Categor√≠a</th>
          <th>Versi√≥n</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody id="appsList"></tbody>
    </table>
  </div>

  <!-- ============ FORMULARIO ============ -->
  <h3 class="panel-section-title" id="formTitle">‚ûï Nueva Aplicaci√≥n</h3>

  <div class="form-card">

    <!-- Columna 1 -->
    <div class="form-main-fields">
      <div class="form-group">
        <label>Nombre</label>
        <input id="nombre" type="text">
      </div>

      <div class="form-group">
        <label>Descripci√≥n</label>
        <textarea id="descripcion"></textarea>
      </div>

      <div class="form-group">
        <label>Versi√≥n</label>
        <input id="version" type="text">
      </div>

      <div class="form-group">
        <label>Sistema Operativo</label>
        <input id="sistema" type="text" placeholder="Ej: Android">
      </div>

      <div class="form-group">
        <label>Requisitos del sistema</label>
        <input id="requisitos" type="text" placeholder="Ej: Android 5.0+">
      </div>

      <div class="form-group">
        <label>Fecha de actualizaci√≥n</label>
        <input id="fechaAct" type="date">
      </div>

      <div class="form-group">
        <label>Edad recomendada</label>
        <input id="edad" type="text" placeholder="Ej: +13, +16">
      </div>

      <div class="form-group">
        <label>Categor√≠a</label>
        <select id="categoria">
          <option>Educaci√≥n</option>
          <option>Libros</option>
          <option>Juegos</option>
          <option>Sociales</option>
          <option>Herramientas</option>
          <option>Entretenimiento</option>
          <option>M√∫sica y Audio</option>
          <option>Fotograf√≠a y Video</option>
          <option>Productividad</option>
        </select>
      </div>
      
      <div class="form-group">
        <label>Idioma</label>
        <input id="idioma" type="text">
      </div>

      <div class="form-group">
        <label>Tipo</label>
        <select id="tipo">
          <option>Gratis</option>
          <option>Pagada</option>
        </select>
      </div>

        <div class="form-group">
        <label>Conexi√≥n</label>
        <select id="internet">
          <option value="offline">Funciona sin Internet</option>
          <option value="online">Requiere Internet</option>
        </select>
      </div>
    </div>
    

    <!-- Columna 2 -->
    <div class="form-side-fields">

      <div class="form-group">
        <label>¬øContiene anuncios?</label>
        <select id="anuncios">
          <option value="si">S√≠ contiene</option>
          <option value="no">No contiene</option>
        </select>
      </div>

      <div class="form-group">
        <label>Pol√≠tica de privacidad (URL)</label>
        <input id="privacidad" type="text" placeholder="https://...">
      </div>

      <!-- ======================= -->
      <!--   NUEVOS CAMPOS URL     -->
      <!-- ======================= -->

      <div class="form-group">
        <label>URL Imagen Principal (GitHub RAW u otra)</label>
        <input id="imagenUrl" type="text" placeholder="https://...">
      </div>

      <!-- ======================= -->
      <!--   NUEVOS CAMPOS PARA LAS CAPTURAS (6 URLs) -->
      <!-- ======================= -->

      <div class="form-group">
        <label>URL de Captura 1</label>
        <input id="capturaUrl1" type="text" placeholder="https://...">
      </div>

      <div class="form-group">
        <label>URL de Captura 2</label>
        <input id="capturaUrl2" type="text" placeholder="https://...">
      </div>

      <div class="form-group">
        <label>URL de Captura 3</label>
        <input id="capturaUrl3" type="text" placeholder="https://...">
      </div>

      <div class="form-group">
        <label>URL de Captura 4</label>
        <input id="capturaUrl4" type="text" placeholder="https://...">
      </div>

      <div class="form-group">
        <label>URL de Captura 5</label>
        <input id="capturaUrl5" type="text" placeholder="https://...">
      </div>

      <div class="form-group">
        <label>URL de Captura 6</label>
        <input id="capturaUrl6" type="text" placeholder="https://...">
      </div>

      <!-- ======================= -->
      <!--   NUEVOS CAMPOS PARA ENLACES -->
      <!-- ======================= -->

      <div class="form-group">
        <label>URL del Icono (GitHub RAW u otra)</label>
        <input id="iconoUrl" type="text" placeholder="https://...">
      </div>

      <div class="form-group">
        <label>URL del APK (enlace directo)</label>
        <input id="apkUrl" type="text" placeholder="https://...">
      </div>

      <!-- ======================= -->
      <!--   ELIMINACI√ìN DE SUBIR ARCHIVOS -->
      <!-- ======================= -->

      <button id="subirBtn" class="btn-primary" onclick="guardarApp()">SUBIR APP</button>

      <p class="status-text" id="estado"></p>

    </div>

  </div>

</div>

<!-- Modal para seleccionar im√°genes -->
<div id="modal" style="display:none;">
  <div id="modalContent"></div>
  <button onclick="closeModal()">Cerrar</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

<script src="firebase.js"></script>
<script src="admin.js"></script>

<script>
// Funci√≥n para abrir el repositorio de GitHub y mostrar las im√°genes
function openGitHubRepo() {
    const repoUrl = 'https://raw.githubusercontent.com/Eler3096/eler3096.github.io/main/release/';
    
    // Abre el modal
    document.getElementById('modal').style.display = 'block';

    // Lista de im√°genes disponibles en el repositorio
    const images = [
        'imagen1.png',
        'imagen2.png',
        'imagen3.png',
        'imagen4.png',
        'imagen5.png',
        'imagen6.png'
    ];

    const modalContent = document.getElementById('modalContent');
    modalContent.innerHTML = '';  // Limpiar el contenido anterior

    // Mostrar las im√°genes en el modal
    images.forEach((image) => {
        const imgElement = document.createElement('img');
        imgElement.src = repoUrl + image;
        imgElement.alt = image;
        imgElement.style.cursor = 'pointer';
        imgElement.style.margin = '10px';
        imgElement.style.height = '100px'; // Ajustar tama√±o

        // Al hacer clic, asignar la URL de la imagen al campo correspondiente
        imgElement.onclick = function() {
            // Insertar la URL de la imagen seleccionada en el campo adecuado
            document.getElementById('capturaUrl1').value = imgElement.src;  // Para el campo de la primera captura
            closeModal();
        };

        modalContent.appendChild(imgElement);
    });
}

function closeModal() {
    // Cerrar el modal
    document.getElementById('modal').style.display = 'none';
}
</script>

</body>
</html>
